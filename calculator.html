<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор меблів — Дизайн та Розрахунок</title>
    <link rel="stylesheet" href="css/style.css?v=3.5">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body.calc-body {
            background-image: url('images/photo_2024-12-22_16-24-29.jpg');
            background-attachment: fixed;
            background-size: cover;
            background-position: center;
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 2rem 1rem;
            font-family: 'Montserrat', sans-serif;
            position: relative;
            margin: 0;
            overflow-x: hidden;
        }

        body.calc-body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.4) 0%, rgba(118, 75, 162, 0.4) 100%);
            background-attachment: fixed;
            pointer-events: none;
            z-index: 0;
        }

        body.calc-body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('assets/calc-pattern.png');
            background-size: 500px;
            background-attachment: fixed;
            opacity: 0.15;
            pointer-events: none;
            z-index: 0;
            mix-blend-mode: screen;
        }

        .calc-container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .calc-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .calc-header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
            background: linear-gradient(to right, #fff, #ddd);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .calc-tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
        }

        .tab-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: #fff;
            padding: 1rem 2rem;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .tab-btn.active {
            background: #fff;
            color: #764ba2;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .calc-section {
            display: none;
        }

        .calc-section.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(10px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .form-group label {
            font-weight: 500;
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .form-group input,
        .form-group select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            padding: 1rem;
            border-radius: 10px;
            color: #fff;
            font-family: inherit;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #fff;
            background: rgba(255, 255, 255, 0.15);
        }

        .form-group select option {
            background: #764ba2;
            color: #fff;
        }

        .results-box {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin-top: 3rem;
            text-align: center;
            border: 1px dashed var(--glass-border);
        }

        .total-price {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 1rem 0;
            color: #fff;
        }

        .price-disclaimer {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .cta-calc {
            background: #fff;
            color: #764ba2;
            border: none;
            padding: 1.2rem 3rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 2rem;
            transition: transform 0.3s, box-shadow 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .cta-calc:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        /* Shape Selector Styles */
        .shape-selector {
            margin-bottom: 3rem;
        }

        .shape-selector .section-title {
            text-align: left;
            margin-bottom: 2rem;
        }

        .shape-selector h2 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .shape-selector p {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .shape-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2.5rem;
        }

        .shape-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            gap: 0.8rem;
        }

        .shape-card {
            width: 100%;
            aspect-ratio: 1/1;
            background: #f0f2f5;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            position: relative;
            border: 1px solid #ddd;
            transition: all 0.3s ease;
        }

        .shape-item.active .shape-card {
            border-color: #ff5722;
            box-shadow: 0 0 15px rgba(255, 87, 34, 0.3);
        }

        .shape-icon {
            width: 100%;
            height: 100%;
            color: #bdc3c7;
            /* Inactive color */
        }

        .shape-item.active .shape-icon {
            color: #ff5722;
            /* Active orange */
        }

        .shape-item .shape-label {
            font-size: 0.95rem;
            font-weight: 500;
            color: #fff;
            text-align: center;
        }

        .shape-radio {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #ddd;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .shape-item.active .shape-radio {
            border-color: #ff5722;
        }

        .shape-radio::after {
            content: '';
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ff5722;
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.3s ease;
        }

        .shape-item.active .shape-radio::after {
            opacity: 1;
            transform: scale(1);
        }

        /* Dimension Inputs */
        .dimension-inputs {
            display: flex;
            align-items: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
        }

        .dim-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dim-group label {
            font-weight: 700;
            font-size: 1.1rem;
            color: #fff;
        }

        .dim-group input {
            width: 120px;
            background: #fff !important;
            color: #333 !important;
            border: 1px solid #ccc !important;
            padding: 0.8rem !important;
            border-radius: 4px !important;
        }

        .dim-unit {
            color: #fff;
            font-weight: 500;
        }

        /* Modern Select Styling */
        .shape-selection-wrapper {
            margin-bottom: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .calc-select {
            width: 100%;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 1.1rem;
            cursor: pointer;
            outline: none;
            transition: all 0.3s ease;
        }

        .calc-select option {
            background: #2c3e50;
            color: #fff;
        }

        .calc-select:focus {
            border-color: #ff5722;
            background: rgba(255, 255, 255, 0.15);
        }

        /* Central Visualization */
        .preview-container {
            width: 100%;
            max-width: 400px;
            aspect-ratio: 1/1;
            margin: 2rem auto;
            background: white;
            border-radius: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            border: 3px solid #000;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .preview-svg {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* Island Toggle Styles */
        .additional-options {
            margin: 1rem 0;
            padding: 1.2rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: center;
        }

        .toggle-group {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            user-select: none;
        }

        .custom-checkbox {
            width: 26px;
            height: 26px;
            border: 2px solid #ddd;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background: #fff;
        }

        #island-toggle:checked+.custom-checkbox {
            background: #ff5722;
            border-color: #ff5722;
        }

        #island-toggle:checked+.custom-checkbox::after {
            content: '✓';
            color: #fff;
            font-weight: bold;
            font-size: 16px;
        }

        .toggle-label {
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
        }

        .dim-group.island-dim {
            border-left: 2px solid rgba(255, 87, 34, 0.5);
            padding-left: 1.5rem;
        }

        @media (max-width: 600px) {
            .calc-container {
                padding: 1.5rem;
            }

            .calc-header h1 {
                font-size: 1.8rem;
            }

            .calc-tabs {
                flex-direction: column;
            }

            .total-price {
                font-size: 1.8rem;
            }
        }
    </style>
</head>

<body class="calc-body">
    <div class="calc-container">
        <header class="calc-header">
            <h1>Калькулятор меблів</h1>
            <p>Отримайте попередню вартість вашого проекту за лічені секунди</p>
        </header>

        <div class="calc-tabs">
            <button class="tab-btn active" onclick="switchTab('kitchen')"><i class="fas fa-utensils"></i> Кухня</button>
            <button class="tab-btn" onclick="switchTab('wardrobe')"><i class="fas fa-door-closed"></i> Шафа</button>
        </div>

        <!-- Kitchen Calculator -->
        <section id="kitchen-calc" class="calc-section active">
            <div class="shape-selector">
                <div class="section-title">
                    <h2>Зазначте формат майбутньої кухні та розміри стін</h2>
                    <p>Оберіть конфігурацію та вкажіть розміри в міліметрах</p>
                </div>

                <div class="shape-selection-wrapper">
                    <label class="toggle-label">Конфігурація кухні:</label>
                    <select id="shape-select" class="calc-select" onchange="selectShape(this.value)">
                        <option value="straight">Пряма</option>
                        <option value="l-left">Ліва кутова (Г-подібна)</option>
                        <option value="l-right">Права кутова (Г-подібна)</option>
                        <option value="u-shape">П-подібна</option>
                    </select>
                </div>

                <div class="preview-container">
                    <div id="visual-preview" class="preview-svg">
                        <!-- Dynamic SVG will be injected here -->
                    </div>
                </div>

                <div class="additional-options">
                    <label class="toggle-group">
                        <input type="checkbox" id="island-toggle" style="display:none;" onchange="toggleIsland()">
                        <div class="custom-checkbox"></div>
                        <span class="toggle-label">Додати кухонний острів</span>
                    </label>
                </div>

                <div class="dimension-inputs" id="dim-container">
                    <div class="dim-group" id="dim-a-group">
                        <label>a:</label>
                        <input type="number" id="k-dim-a" placeholder="3.6" step="0.1" oninput="calculateKitchen()">
                        <span class="dim-unit">м</span>
                    </div>
                    <div class="dim-group" id="dim-b-group" style="display:none;">
                        <label>b:</label>
                        <input type="number" id="k-dim-b" placeholder="2.4" step="0.1" oninput="calculateKitchen()">
                        <span class="dim-unit">м</span>
                    </div>
                    <div class="dim-group" id="dim-c-group" style="display:none;">
                        <label>c:</label>
                        <input type="number" id="k-dim-c" placeholder="2.4" step="0.1" oninput="calculateKitchen()">
                        <span class="dim-unit">м</span>
                    </div>
                    <div class="dim-group island-dim" id="dim-o-group" style="display:none;">
                        <label>o:</label>
                        <input type="number" id="k-dim-o" placeholder="1.2" step="0.1" oninput="calculateKitchen()">
                        <span class="dim-unit">м</span>
                    </div>
                </div>

                <div class="height-controls"
                    style="margin-top: 2rem; padding: 1.5rem; background: rgba(255, 255, 255, 0.03); border-radius: 12px;">
                    <h3 style="font-size: 1.2rem; margin-bottom: 1.5rem; color: #fff;">Висота модулів</h3>

                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                        <!-- Lower Cabinets -->
                        <div class="height-group">
                            <label
                                style="display: block; margin-bottom: 0.8rem; font-weight: 500; color: rgba(255, 255, 255, 0.8);">Нижні
                                модулі:</label>
                            <div style="display: flex; flex-direction: column; gap: 0.8rem;">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="radio" name="lower-height" value="900" checked
                                        onchange="calculateKitchen()" style="cursor: pointer;">
                                    <span style="color: #fff;">Стандарт (900 мм)</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="radio" name="lower-height" value="custom"
                                        onchange="toggleCustomHeight('lower')" style="cursor: pointer;">
                                    <span style="color: #fff;">Власна висота:</span>
                                    <input type="number" id="lower-custom" placeholder="900" disabled
                                        style="width: 100px; padding: 0.5rem; border-radius: 4px; border: 1px solid #ccc; background: #fff; color: #333;"
                                        oninput="calculateKitchen()">
                                    <span style="color: #fff;">мм</span>
                                </label>
                            </div>
                        </div>

                        <!-- Upper Cabinets -->
                        <div class="height-group">
                            <label
                                style="display: block; margin-bottom: 0.8rem; font-weight: 500; color: rgba(255, 255, 255, 0.8);">Верхні
                                модулі:</label>
                            <div style="display: flex; flex-direction: column; gap: 0.8rem;">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="radio" name="upper-height" value="720" checked
                                        onchange="calculateKitchen()" style="cursor: pointer;">
                                    <span style="color: #fff;">Стандарт (720 мм)</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="radio" name="upper-height" value="custom"
                                        onchange="toggleCustomHeight('upper')" style="cursor: pointer;">
                                    <span style="color: #fff;">Власна висота:</span>
                                    <input type="number" id="upper-custom" placeholder="720" disabled
                                        style="width: 100px; padding: 0.5rem; border-radius: 4px; border: 1px solid #ccc; background: #fff; color: #333;"
                                        oninput="calculateKitchen()">
                                    <span style="color: #fff;">мм</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="k-facade">Матеріал фасадів</label>
                    <select id="k-facade" onchange="calculateKitchen()">
                        <option value="15000">ДСП (Бюджет)</option>
                        <option value="22000" selected>МДФ Фарбований (Стандарт)</option>
                        <option value="28000">Акрил (Преміум)</option>
                        <option value="35000">Шпон / Дерево</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="k-countertop">Стільниця</label>
                    <select id="k-countertop" onchange="calculateKitchen()">
                        <option value="3000">ЛДСП (Вологостійка)</option>
                        <option value="12000">Кварц (Штучний камінь)</option>
                        <option value="20000">Компакт-плита</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="k-hardware">Фурнітура</label>
                    <select id="k-hardware" onchange="calculateKitchen()">
                        <option value="1.1">Базова (GTV / Muller)</option>
                        <option value="1.3" selected>Стандарт (Blum / Hettich - частково)</option>
                        <option value="1.6">Повний Blum / Grass</option>
                    </select>
                </div>
            </div>
            <div class="results-box">
                <p>Орієнтовна вартість:</p>
                <div class="total-price" id="k-total">0 ₴</div>
                <p class="price-disclaimer">* Вартість вказана з урахуванням матеріалів, виготовлення та монтажу.
                    Остаточна ціна залежить від проекту.</p>
                <a href="index.html#contactFormSection" class="cta-calc">Замовити точний розрахунок</a>
            </div>
        </section>

        <!-- Wardrobe Calculator -->
        <section id="wardrobe-calc" class="calc-section">
            <div class="shape-selector" style="margin-bottom: 2rem;">
                <div class="section-title">
                    <h2>Оберіть тип шафи</h2>
                    <p>Виберіть призначення шафи для точнішого розрахунку</p>
                </div>

                <div class="shape-selection-wrapper">
                    <label class="toggle-label">Тип шафи:</label>
                    <select id="w-category" class="calc-select" onchange="updateWardrobeOptions()">
                        <option value="bedroom" selected>Шафа в спальню</option>
                        <option value="walk-in">Гардеробна</option>
                        <option value="children">Шафа в дитячу</option>
                        <option value="hallway">Шафа в прихожу</option>
                        <option value="office">Шафа в кабінет</option>
                        <option value="sliding">Шафа-купе</option>
                    </select>
                </div>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="w-width">Ширина (мм)</label>
                    <input type="number" id="w-width" placeholder="Наприклад: 2400" oninput="calculateWardrobe()">
                </div>
                <div class="form-group">
                    <label for="w-height">Висота (мм)</label>
                    <input type="number" id="w-height" placeholder="Наприклад: 2600" oninput="calculateWardrobe()">
                </div>
                <div class="form-group">
                    <label for="w-type">Тип дверей</label>
                    <select id="w-type" onchange="calculateWardrobe()">
                        <option value="5000">Без фасадів (відкрита система)</option>
                        <option value="8000">Розпашні (ДСП)</option>
                        <option value="10000" selected>Розсувна система (Дзеркало/ДСП)</option>
                        <option value="15000">Розсувна система (Скло/Лакобель)</option>
                        <option value="22000">Прихованого монтажу / Шпон</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="w-filling">Наповнення</label>
                    <select id="w-filling" onchange="calculateWardrobe()">
                        <option value="1">Стандарт (Полиці + Труби)</option>
                        <option value="1.2">Комфорт (+ Шухляди)</option>
                        <option value="1.4">Люкс (+ Пантографи / Органайзери)</option>
                    </select>
                </div>
            </div>
            <div class="results-box">
                <p>Орієнтовна вартість:</p>
                <div class="total-price" id="w-total">0 ₴</div>
                <p class="price-disclaimer">* Остаточна ціна розраховується після замірів та вибору конкретної
                    фурнітури.</p>
                <a href="index.html#contactFormSection" class="cta-calc">Замовити точний розрахунок</a>
            </div>
        </section>
    </div>

    <script>
        let currentKitchenShape = 'straight';

        // SVG Markers for dimension lines
        const svgDefs = `
            <defs>
                <marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="5" markerHeight="5" orient="auto-start-reverse">
                    <path d="M 0 0 L 10 5 L 0 10 z" fill="#FF3B3B" />
                </marker>
            </defs>`;

        const shapeVisuals = {
            'straight': `<svg viewBox="-20 -25 140 150" class="preview-svg" style="background: white;">
                ${svgDefs}
                <!-- Black Border Frame -->
                <rect x="0" y="0" width="100" height="100" fill="none" stroke="#000" stroke-width="3"/>
                
                <!-- Kitchen Block (Full width, pinned to top) -->
                <rect x="0" y="0" width="100" height="30" fill="#5865F2"/>
                
                <!-- Dimension 'a' (Above border) -->
                <line x1="0" y1="-5" x2="0" y2="-15" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="100" y1="-5" x2="100" y2="-15" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="0" y1="-10" x2="100" y2="-10" stroke="#FF3B3B" stroke-width="1.5" marker-start="url(#arrow)" marker-end="url(#arrow)"/>
                <text x="50" y="-12" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="#FF3B3B">a</text>
                
                {island}
            </svg>`,
            'l-left': `<svg viewBox="-20 -25 140 150" class="preview-svg" style="background: white;">
                ${svgDefs}
                <!-- Black Border Frame -->
                <rect x="0" y="0" width="100" height="100" fill="none" stroke="#000" stroke-width="3"/>
                
                <!-- Kitchen Blocks (Full width top, left leg) -->
                <rect x="0" y="0" width="100" height="20" fill="#5865F2"/>
                <rect x="0" y="20" width="20" height="30" fill="#5865F2"/>
                
                <!-- Dimension 'a' (Above border) -->
                <line x1="0" y1="-5" x2="0" y2="-15" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="100" y1="-5" x2="100" y2="-15" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="0" y1="-10" x2="100" y2="-10" stroke="#FF3B3B" stroke-width="1.5" marker-start="url(#arrow)" marker-end="url(#arrow)"/>
                <text x="50" y="-12" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="#FF3B3B">a</text>
                
                <!-- Dimension 'b' (Right side) -->
                <line x1="105" y1="0" x2="115" y2="0" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="105" y1="50" x2="115" y2="50" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="110" y1="0" x2="110" y2="50" stroke="#FF3B3B" stroke-width="1.5" marker-start="url(#arrow)" marker-end="url(#arrow)"/>
                <text x="115" y="25" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="#FF3B3B" transform="rotate(90, 115, 25)">b</text>
                
                {island}
            </svg>`,
            'l-right': `<svg viewBox="-20 -25 140 150" class="preview-svg" style="background: white;">
                ${svgDefs}
                <!-- Black Border Frame -->
                <rect x="0" y="0" width="100" height="100" fill="none" stroke="#000" stroke-width="3"/>
                
                <!-- Kitchen Blocks (Full width top, right leg) -->
                <rect x="0" y="0" width="100" height="20" fill="#5865F2"/>
                <rect x="80" y="20" width="20" height="30" fill="#5865F2"/>
                
                <!-- Dimension 'a' (Above border) -->
                <line x1="0" y1="-5" x2="0" y2="-15" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="100" y1="-5" x2="100" y2="-15" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="0" y1="-10" x2="100" y2="-10" stroke="#FF3B3B" stroke-width="1.5" marker-start="url(#arrow)" marker-end="url(#arrow)"/>
                <text x="50" y="-12" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="#FF3B3B">a</text>
                
                <!-- Dimension 'b' (Left side) -->
                <line x1="-5" y1="0" x2="-15" y2="0" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="-5" y1="50" x2="-15" y2="50" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="-10" y1="0" x2="-10" y2="50" stroke="#FF3B3B" stroke-width="1.5" marker-start="url(#arrow)" marker-end="url(#arrow)"/>
                <text x="-15" y="25" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="#FF3B3B" transform="rotate(-90, -15, 25)">b</text>
                
                {island}
            </svg>`,
            'u-shape': `<svg viewBox="-20 -25 140 150" class="preview-svg" style="background: white;">
                ${svgDefs}
                <!-- Black Border Frame -->
                <rect x="0" y="0" width="100" height="100" fill="none" stroke="#000" stroke-width="3"/>
                
                <!-- Kitchen Blocks (Full width top, both legs) -->
                <rect x="0" y="0" width="100" height="20" fill="#5865F2"/>
                <rect x="0" y="20" width="20" height="30" fill="#5865F2"/>
                <rect x="80" y="20" width="20" height="30" fill="#5865F2"/>
                
                <!-- Dimension 'a' (Above border) -->
                <line x1="0" y1="-5" x2="0" y2="-15" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="100" y1="-5" x2="100" y2="-15" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="0" y1="-10" x2="100" y2="-10" stroke="#FF3B3B" stroke-width="1.5" marker-start="url(#arrow)" marker-end="url(#arrow)"/>
                <text x="50" y="-12" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="#FF3B3B">a</text>
                
                <!-- Dimension 'b' (Left side) -->
                <line x1="-5" y1="0" x2="-15" y2="0" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="-5" y1="50" x2="-15" y2="50" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="-10" y1="0" x2="-10" y2="50" stroke="#FF3B3B" stroke-width="1.5" marker-start="url(#arrow)" marker-end="url(#arrow)"/>
                <text x="-15" y="25" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="#FF3B3B" transform="rotate(-90, -15, 25)">b</text>
                
                <!-- Dimension 'c' (Right side) -->
                <line x1="105" y1="0" x2="115" y2="0" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="105" y1="50" x2="115" y2="50" stroke="#FF3B3B" stroke-width="1.5"/>
                <line x1="110" y1="0" x2="110" y2="50" stroke="#FF3B3B" stroke-width="1.5" marker-start="url(#arrow)" marker-end="url(#arrow)"/>
                <text x="115" y="25" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="#FF3B3B" transform="rotate(90, 115, 25)">c</text>
                
                {island}
            </svg>`
        };

        const islandSVG = `
            <!-- Island Block -->
            <rect x="30" y="70" width="40" height="15" fill="#5865F2"/>
            <!-- Dimension 'o' (Below island) -->
            <line x1="30" y1="85" x2="30" y2="95" stroke="#FF3B3B" stroke-width="1.2"/>
            <line x1="70" y1="85" x2="70" y2="95" stroke="#FF3B3B" stroke-width="1.2"/>
            <line x1="30" y1="90" x2="70" y2="90" stroke="#FF3B3B" stroke-width="1.2" marker-start="url(#arrow)" marker-end="url(#arrow)"/>
            <text x="50" y="88" font-family="Arial" font-size="8" font-weight="bold" text-anchor="middle" fill="#FF3B3B">o</text>`;

        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.calc-section').forEach(sec => sec.classList.remove('active'));

            event.currentTarget.classList.add('active');
            document.getElementById(tab + '-calc').classList.add('active');
        }

        function updateVisualization() {
            const hasIsland = document.getElementById('island-toggle').checked;
            let svgHtml = shapeVisuals[currentKitchenShape];
            svgHtml = svgHtml.replace('{island}', hasIsland ? islandSVG : '');
            document.getElementById('visual-preview').innerHTML = svgHtml;
        }

        function selectShape(shape) {
            currentKitchenShape = shape;

            // Toggle dimension inputs
            document.getElementById('dim-b-group').style.display = (shape !== 'straight') ? 'flex' : 'none';
            document.getElementById('dim-c-group').style.display = (shape === 'u-shape') ? 'flex' : 'none';

            updateVisualization();
            calculateKitchen();
        }

        function toggleIsland() {
            const isActive = document.getElementById('island-toggle').checked;
            document.getElementById('dim-o-group').style.display = isActive ? 'flex' : 'none';
            updateVisualization();
            calculateKitchen();
        }

        function toggleCustomHeight(type) {
            const customInput = document.getElementById(type + '-custom');
            const customRadio = document.querySelector(`input[name="${type}-height"][value="custom"]`);

            if (customRadio.checked) {
                customInput.disabled = false;
                customInput.focus();
            } else {
                customInput.disabled = true;
            }
            calculateKitchen();
        }

        function calculateKitchen() {
            // Read dimensions in METERS and convert to MM
            const a = (parseFloat(document.getElementById('k-dim-a').value) || 0) * 1000;
            const b = (parseFloat(document.getElementById('k-dim-b').value) || 0) * 1000;
            const c = (parseFloat(document.getElementById('k-dim-c').value) || 0) * 1000;
            const o = (parseFloat(document.getElementById('k-dim-o').value) || 0) * 1000;
            const hasIsland = document.getElementById('island-toggle').checked;

            // Read height values
            const lowerHeightRadio = document.querySelector('input[name="lower-height"]:checked');
            const upperHeightRadio = document.querySelector('input[name="upper-height"]:checked');

            const lowerHeight = lowerHeightRadio.value === 'custom'
                ? (parseFloat(document.getElementById('lower-custom').value) || 900)
                : parseFloat(lowerHeightRadio.value);

            const upperHeight = upperHeightRadio.value === 'custom'
                ? (parseFloat(document.getElementById('upper-custom').value) || 720)
                : parseFloat(upperHeightRadio.value);

            let totalMM = 0;
            switch (currentKitchenShape) {
                case 'straight': totalMM = a; break;
                case 'l-left':
                case 'l-right': totalMM = a + b; break;
                case 'u-shape': totalMM = a + b + c; break;
            }

            if (hasIsland) totalMM += o;

            const length = totalMM / 1000; // Convert to meters for calculation
            const facade = parseFloat(document.getElementById('k-facade').value);
            const countertop = parseFloat(document.getElementById('k-countertop').value);
            const hardware = parseFloat(document.getElementById('k-hardware').value);

            if (length === 0) {
                document.getElementById('k-total').innerText = '0 ₴';
                return;
            }

            // Calculation logic with shape complexity factor
            let shapeFactor = 1.0;
            if (currentKitchenShape.startsWith('l-')) shapeFactor = 1.1;
            if (currentKitchenShape === 'u-shape') shapeFactor = 1.2;

            // Island adds its own complexity (island finishes)
            let islandFactor = hasIsland ? 1.15 : 1.0;

            let total = (facade + countertop) * length * hardware * shapeFactor * islandFactor;

            document.getElementById('k-total').innerText = Math.round(total).toLocaleString('uk-UA') + ' ₴';
        }

        // Initialize visualization
        document.addEventListener('DOMContentLoaded', () => {
            updateVisualization();
        });

        function updateWardrobeOptions() {
            const category = document.getElementById('w-category').value;
            const typeSelect = document.getElementById('w-type');
            const fillingSelect = document.getElementById('w-filling');

            // Update door type options based on category
            if (category === 'sliding') {
                // Pre-select sliding door system for sliding wardrobes
                typeSelect.value = '10000';
            } else if (category === 'walk-in') {
                // Walk-in closets might not need doors or use minimal options
                // Keep current selection but user can choose
            }

            // Update filling options descriptions (optional enhancement)
            // For now, keep all options available for all categories

            // Recalculate with new category
            calculateWardrobe();
        }

        function calculateWardrobe() {
            const widthMM = parseFloat(document.getElementById('w-width').value) || 0;
            const heightMM = parseFloat(document.getElementById('w-height').value) || 0;

            const width = widthMM / 1000;
            const height = heightMM / 1000;

            const type = parseFloat(document.getElementById('w-type').value);
            const filling = parseFloat(document.getElementById('w-filling').value);
            const category = document.getElementById('w-category')?.value || 'bedroom';

            if (width === 0 || height === 0) {
                document.getElementById('w-total').innerText = '0 ₴';
                return;
            }

            // Category-based pricing factors
            let categoryFactor = 1.0;
            switch (category) {
                case 'walk-in': categoryFactor = 1.3; break;  // More complex, comprehensive
                case 'children': categoryFactor = 1.1; break;  // Safety features
                case 'hallway': categoryFactor = 0.95; break;  // Simpler, compact
                case 'office': categoryFactor = 1.05; break;   // Specialized shelving
                case 'sliding': categoryFactor = 1.15; break;  // Sliding mechanism
                case 'bedroom':
                default: categoryFactor = 1.0; break;          // Standard
            }

            // Formula: Area (sq.m) * base price factor * filling multiplier * category factor
            let area = width * height;
            let total = area * type * filling * categoryFactor;

            document.getElementById('w-total').innerText = Math.round(total).toLocaleString('uk-UA') + ' ₴';
        }
    </script>
</body>

</html>